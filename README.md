# InEcho API

InEcho is a RESTful API built with FastAPI for managing users and album ratings. It supports user authentication, album search (with Discogs integration), and CRUD operations for album ratings.

## Features

- **User Authentication:** Register, login, and manage user credentials securely.
- **Ratings:** Users can rate albums, update or delete their ratings, and view all their ratings.
- **Rate Limiting:** Prevent abuse with configurable rate limits on endpoints.
- **Logging:** Configurable logging for debugging and monitoring.
- **Database:** Uses SQLAlchemy ORM with PostgreSQL (or any SQLAlchemy-supported DB).
- **Environment Variables:** Configuration via `.env` file.

## Project Structure

```
.
├── main.py                # FastAPI app entry point
├── app_logging.py         # Logging configuration
├── rate_limiting.py       # Rate limiting setup (SlowAPI)
├── requirements.txt       # Python dependencies
├── album/                 # Album-related logic (controller, service, model, utils)
├── auth/                  # Authentication logic (controller, service, model)
├── users/                 # User management (controller, service, model)
├── database/              # Database connection and session management
├── entities/              # SQLAlchemy ORM models
├── messages/              # Success and error messages
├── utils/                 # Utility functions
```

## Setup

1. **Clone the repository**

2. **Install dependencies**
   ```sh
   pip install -r requirements.txt
   ```

3. **Configure environment variables**

   Create a `.env` file in the root directory with the following variables:
   ```
   DATABASE_URL=postgresql://user:password@localhost/dbname
   SECRET_KEY=your_secret_key
   ALGORITHM=your_algorithm
   ACCESS_TOKEN_EXPIRE_MINUTES=30
   DISCOGS_TOKEN=your_discogs_api_token
   APP_NAME = your_app_name
   APP_VERSION = your_app_version
   STRING_SIMILARITY_THRESHOLD=0.8
   ```

4. **Run the application**
   ```sh
   uvicorn main:app --reload
   ```

5. **API Documentation**

   Visit [http://localhost:8000/docs](http://localhost:8000/docs) for the interactive Swagger UI.

## Key Endpoints

- `POST /auth/` - Register a new user
- `POST /auth/token` - Obtain JWT access token
- `PUT /user/change-password` - Change user password
- `GET /album/ratings` - Get all ratings for current user
- `POST /album/rate-album` - Rate an album
- `PUT /album/change-rating` - Update a rating
- `DELETE /album/delete-rating` - Delete a rating
- `DELETE /album/delete-all-ratings` - Delete all ratings for current user

## Notes

- **Discogs API**: You must provide a valid Discogs API token in your `.env` file.
- **Database**: Make sure your database is running and accessible via the `DATABASE_URL`.
- **Rate Limiting**: Configured via [SlowAPI](https://pypi.org/project/slowapi/).

---

*Generated by [GitHub Copilot](https://github.com/features/copilot)*